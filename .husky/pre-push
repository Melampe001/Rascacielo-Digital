#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run linter
echo "ğŸ“‹ Running linter..."
npm run lint || {
    echo "âŒ Linting failed. Please fix errors before pushing."
    exit 1
}

# Run tests
echo "ğŸ§ª Running tests..."
npm test || {
    echo "âŒ Tests failed. Please fix failing tests before pushing."
    exit 1
}

# Run security audit
echo "ğŸ”’ Running security audit..."
npm audit --audit-level=high || {
    echo "âš ï¸ High or critical vulnerabilities found. Consider fixing before pushing."
    # Don't fail the push, just warn
}

echo "âœ… All pre-push checks passed!"
